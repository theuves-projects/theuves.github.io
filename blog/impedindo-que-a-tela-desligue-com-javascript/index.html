<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/9db2b6f97fa9938b776a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9db2b6f97fa9938b776a.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-12c069fcb26ee750200e.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js" as="script"/><link rel="preload" href="/_next/static/chunks/1b1d2efccfda2790dd424b9455d4bf69d97f9eaa.10b20fed2722a467a0a9.js" as="script"/><link rel="preload" href="/_next/static/chunks/f6078781a05fe1bcb0902d23dbbb2662c8d200b3.22385a4a605b66265c77.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-03211d1b50de1d1700ce.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bpost%5D-27b6e4167a38e98f672f.js" as="script"/><style id="__jsx-706681289">.header.jsx-706681289{text-align:center;padding:calc(var(--margin) / 2) 0;margin-bottom:var(--margin);border-bottom:solid 1px black;}.header-title.jsx-706681289{margin-bottom:0;display:inline-block;font-size:2em;line-height:175%;text-transform:lowercase;color:black;font-weight:bold;}.header-list.jsx-706681289{padding-left:0;}.header-item.jsx-706681289{display:inline-block;}.header-item.jsx-706681289:not(:first-child){margin-left:10px;}.header-item.jsx-706681289:not(:last-child){margin-right:10px;}.header-link.jsx-706681289{text-transform:uppercase;-webkit-text-decoration:none;text-decoration:none;font-size:.9em;color:black;}.header-external.jsx-706681289{width:.8em;color:#666;}.header-link.jsx-706681289:hover{color:#666;}@media (max-width:620px){.header.jsx-706681289{padding:0 0 5px 0;margin-bottom:20px;border-bottom:none;}.header-title.jsx-706681289{font-size:2.5em;}.header-item.jsx-706681289:not(:first-child){margin-left:5px;}.header-item.jsx-706681289:not(:last-child){margin-right:5px;}}</style><style id="__jsx-3051481630">.metadata.jsx-3051481630{color:#333;font-style:italic;text-align:right;font-size:14px;}.author.jsx-3051481630{color:#333;text-align:right;font-size:14px;}</style><style id="__jsx-3538516935">.main.jsx-3538516935{padding:0 10px;margin:0 auto;max-width:620px;}@media (max-width:470px){.main.jsx-3538516935{padding:0 15px;}}</style></head><body><div id="__next"><title>Matheus Alves (@theuves)</title><header class="jsx-706681289 header"><span class="jsx-706681289 header-title">Matheus Alves</span><ul class="jsx-706681289 header-list"><li class="jsx-706681289 header-item"><a href="/" class="jsx-706681289 header-link">Início</a></li><li class="jsx-706681289 header-item"><a href="/projects" class="jsx-706681289 header-link">Projetos</a></li><li class="jsx-706681289 header-item"><a target="_blank" href="https://github.com/theuves" class="jsx-706681289 header-link">GitHub <img src="/external-link.svg" class="jsx-706681289 header-external"/></a></li><li class="jsx-706681289 header-item"><a target="_blank" href="https://www.linkedin.com/in/theuves/" class="jsx-706681289 header-link">LinkedIn <img src="/external-link.svg" class="jsx-706681289 header-external"/></a></li></ul></header><div class="jsx-3538516935 main"><div class="jsx-3051481630 metadata"><span class="jsx-3051481630">Matheus Alves / <!-- -->5/7/2019</span></div><h1 class="jsx-3051481630 title">Impedindo que a tela desligue com JavaScript</h1><article class="jsx-3051481630 article"><div><p>Recentemente o <em>power button</em> do meu <em>smartphone</em> estragou e eu tive que
começar a me virar sem ele. A princípio, naturalmente, eu não conseguia
desligar a tela e o tempo de inatividade antes do seu desligamento era de 5
minutos - o que é muito tempo para se esperar antes de colocá-lo no bolso.
Desse modo, antes de eu querer concertar o dispositivo, procurar um aplicativo
ou qualquer coisa que seja para resolver o meu problema, decidi configurar o
tempo máximo de inatividade para somente 15 segundos.</p><p>Ou seja: se eu não tocar a tela em 15 segundos, ela desliga. Bem simples!</p><h2>Problemas</h2><p>No entanto, notei alguns problemas ao fazer isso logo após tentar ler alguns
artigos longos na <em>internet</em> pelo <em>browser</em>, pois a tela sempre desligava
durante a leitura, porque nesses casos o tempo sem tocar a tela do dispositivo
aumenta - principalmente se você está lendo algum artigo onde há muitas
ilustrações, fórmulas ou códigos que devem ser analisados por um tempinho um
pouco maior. Até que eu notei algo bem interessante que ocorria no aplicativo
do <a href="https://www.instapaper.com/">Instapaper</a>, que além de lhe oferecer um vasto
número de utilitários e personalização durante a leitura de um texto, também
impede que a tela desligue enquanto você está a lê-lo, assim como quando você
assiste um video.</p><blockquote><p>Obs.: O Instapaper é um aplicativo que lhe permite salvar o texto principal
de um site, aplicativo ou qualquer coisa do gênero para ler mais tarde, quando
estiver desconectado da internet por exemplo.</p></blockquote><h2>Soluções</h2><p>Depois de ver essa funcionalidade, fiquei me questionando se haveria alguma
forma de impedir que a tela desligue utilizando JavaScript dentro de um
<em>browser</em>. Fiz algumas pesquisas no Google e as duas primeiras coisas
relevantes que encontrei foram: <em>Wake Lock API</em> e <em>NoSleep.js</em>.</p><p>A primeira, <em>Wake Lock API</em>, eu encontrei no artigo
<a href="https://developers.google.com/web/updates/2018/12/wakelock"><em>I’m Awake! Stay Awake with the WakeLock API</em></a>,
do Pete LePage no Google Developers, que é uma API para os navegadores que
basicamente permite manter o &quot;dispositivo acordado&quot;, só que ela ainda está em
progresso e aparentemente funciona apenas no Google Chrome e com a <em>flag</em>
<code>#enable-experimental-web-platform-features</code> habilitada nele, portanto, isso
ainda não é ainda nem um pouco útil para os dias de hoje.</p><p>A segunda, <a href="https://github.com/richtr/NoSleep.js"><em>NoSleep.js</em></a>, é uma
biblioteca criada pelo Rich Tibbett que eu encontrei no GitHub e que lhe
permite fazer algo bem semelhante ao <em>Wake Lock API</em>, no entanto, com algo que
alguns podem chamar de gambiarra. O fato é que uma tela não descansa se o
usuário estiver assistindo um vídeo, certo?! Desse modo, o <em>NoSleep.js</em>,
enquanto estiver ativado, apenas dá <em>play</em> num video em segundo plano fazendo
o navegador entender que o usuário está assistindo algo e evitando assim o
desligamento dela. O video em questão não apresenta nenhum vestígio de seu
comportamento para o usuário, pois além de ser mudo nem chega a ser inserido na
<code>&lt;body&gt;</code> do HTML, além de ser muitíssimo leve.</p><h2>Uso do NoSleep.js</h2><p>Usar essa biblioteca é extremamente simples, onde você possui apenas dois
modos: ativado e desativado. O primeiro faz com que a tela não descanse e o
segundo, obviamente, deixa a tela no modo normal.</p><p>É possível obter o NoSleep.js pelo <a href="https://www.npmjs.com/">NPM</a>,
<a href="https://bower.io/">Bower</a>
(que já <a href="https://snyk.io/blog/bower-is-dead/">foi descontinuado</a>) ou
diretamente pelo <em>download</em> do código-fonte no GitHub.</p><p>Depois de tê-lo instalado, antes de usá-lo você deve instanciar um objeto a
partir da classe  <code>NoSleep</code>.</p><pre><code class="language-javascript">var noSleep = new NoSleep();
</code></pre><p>Após isso, a variável <code>noSleep</code> armazenará um objeto com dois métodos:
<code>enable</code> (para ativar) e <code>disable</code> (para desativar). Algo curioso e que
certamente é um ponto negativo dessa biblioteca é a obrigatoriedade do método
<code>enable</code> ser chamado dentro de um
<a href="https://www.w3schools.com/jsref/dom_obj_event.asp">evento</a> de entrada do
usuário, como um <code>click</code>. Por exemplo, supondo que <code>button</code> é o elemento de um
botão qualquer da sua página então você deve fazer isso para ativar o
NoSleep.js:</p><pre><code class="language-javascript">button.addEventListener(&#x27;click&#x27;, () =&gt; {
  noSleep.enable();
});
</code></pre><p>Já para desativá-lo, basta usar <code>noSleep.disable()</code> em qualquer lugar do
código, não havendo a necessidade de estar encapsulado em um evento do usuário.</p><h2>Conclusão</h2><p>Você pode experimentar um
<a href="https://theuves-demos.github.io/no-sleep-demo/">exemplo aqui</a>, observando que
é extremamente aconselhável que seu dispositivo esteja com um tempo limite de
tela baixo, caso contrário você poderá perder muito tempo esperando até cair a
fixa de que a demonstração está funcionando.</p><p>Esse é um utilitário simples e que em alguns casos para determinados usuários
pode não fazer absolutamente nenhuma diferença, mas que para outros, como foi
o meu, pode fazer uma falta gigantesca, não somente para leitura dum texto (que
talvez seja um caso mais incomum), mas também para jogos, páginas com animações
ou simples aplicativos como o de um cronômetro.</p></div></article></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Recentemente o \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"power button\"), \" do meu \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"smartphone\"), \" estragou e eu tive que\\ncome\\xE7ar a me virar sem ele. A princ\\xEDpio, naturalmente, eu n\\xE3o conseguia\\ndesligar a tela e o tempo de inatividade antes do seu desligamento era de 5\\nminutos - o que \\xE9 muito tempo para se esperar antes de coloc\\xE1-lo no bolso.\\nDesse modo, antes de eu querer concertar o dispositivo, procurar um aplicativo\\nou qualquer coisa que seja para resolver o meu problema, decidi configurar o\\ntempo m\\xE1ximo de inatividade para somente 15 segundos.\"), mdx(\"p\", null, \"Ou seja: se eu n\\xE3o tocar a tela em 15 segundos, ela desliga. Bem simples!\"), mdx(\"h2\", null, \"Problemas\"), mdx(\"p\", null, \"No entanto, notei alguns problemas ao fazer isso logo ap\\xF3s tentar ler alguns\\nartigos longos na \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"internet\"), \" pelo \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"browser\"), \", pois a tela sempre desligava\\ndurante a leitura, porque nesses casos o tempo sem tocar a tela do dispositivo\\naumenta - principalmente se voc\\xEA est\\xE1 lendo algum artigo onde h\\xE1 muitas\\nilustra\\xE7\\xF5es, f\\xF3rmulas ou c\\xF3digos que devem ser analisados por um tempinho um\\npouco maior. At\\xE9 que eu notei algo bem interessante que ocorria no aplicativo\\ndo \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.instapaper.com/\"\n  }), \"Instapaper\"), \", que al\\xE9m de lhe oferecer um vasto\\nn\\xFAmero de utilit\\xE1rios e personaliza\\xE7\\xE3o durante a leitura de um texto, tamb\\xE9m\\nimpede que a tela desligue enquanto voc\\xEA est\\xE1 a l\\xEA-lo, assim como quando voc\\xEA\\nassiste um video.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Obs.: O Instapaper \\xE9 um aplicativo que lhe permite salvar o texto principal\\nde um site, aplicativo ou qualquer coisa do g\\xEAnero para ler mais tarde, quando\\nestiver desconectado da internet por exemplo.\")), mdx(\"h2\", null, \"Solu\\xE7\\xF5es\"), mdx(\"p\", null, \"Depois de ver essa funcionalidade, fiquei me questionando se haveria alguma\\nforma de impedir que a tela desligue utilizando JavaScript dentro de um\\n\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"browser\"), \". Fiz algumas pesquisas no Google e as duas primeiras coisas\\nrelevantes que encontrei foram: \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Wake Lock API\"), \" e \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"NoSleep.js\"), \".\"), mdx(\"p\", null, \"A primeira, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Wake Lock API\"), \", eu encontrei no artigo\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developers.google.com/web/updates/2018/12/wakelock\"\n  }), mdx(\"em\", {\n    parentName: \"a\"\n  }, \"I\\u2019m Awake! Stay Awake with the WakeLock API\")), \",\\ndo Pete LePage no Google Developers, que \\xE9 uma API para os navegadores que\\nbasicamente permite manter o \\\"dispositivo acordado\\\", s\\xF3 que ela ainda est\\xE1 em\\nprogresso e aparentemente funciona apenas no Google Chrome e com a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"flag\"), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#enable-experimental-web-platform-features\"), \" habilitada nele, portanto, isso\\nainda n\\xE3o \\xE9 ainda nem um pouco \\xFAtil para os dias de hoje.\"), mdx(\"p\", null, \"A segunda, \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/richtr/NoSleep.js\"\n  }), mdx(\"em\", {\n    parentName: \"a\"\n  }, \"NoSleep.js\")), \", \\xE9 uma\\nbiblioteca criada pelo Rich Tibbett que eu encontrei no GitHub e que lhe\\npermite fazer algo bem semelhante ao \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Wake Lock API\"), \", no entanto, com algo que\\nalguns podem chamar de gambiarra. O fato \\xE9 que uma tela n\\xE3o descansa se o\\nusu\\xE1rio estiver assistindo um v\\xEDdeo, certo?! Desse modo, o \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"NoSleep.js\"), \",\\nenquanto estiver ativado, apenas d\\xE1 \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"play\"), \" num video em segundo plano fazendo\\no navegador entender que o usu\\xE1rio est\\xE1 assistindo algo e evitando assim o\\ndesligamento dela. O video em quest\\xE3o n\\xE3o apresenta nenhum vest\\xEDgio de seu\\ncomportamento para o usu\\xE1rio, pois al\\xE9m de ser mudo nem chega a ser inserido na\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\u003cbody\u003e\"), \" do HTML, al\\xE9m de ser muit\\xEDssimo leve.\"), mdx(\"h2\", null, \"Uso do NoSleep.js\"), mdx(\"p\", null, \"Usar essa biblioteca \\xE9 extremamente simples, onde voc\\xEA possui apenas dois\\nmodos: ativado e desativado. O primeiro faz com que a tela n\\xE3o descanse e o\\nsegundo, obviamente, deixa a tela no modo normal.\"), mdx(\"p\", null, \"\\xC9 poss\\xEDvel obter o NoSleep.js pelo \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/\"\n  }), \"NPM\"), \",\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://bower.io/\"\n  }), \"Bower\"), \"\\n(que j\\xE1 \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://snyk.io/blog/bower-is-dead/\"\n  }), \"foi descontinuado\"), \") ou\\ndiretamente pelo \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"download\"), \" do c\\xF3digo-fonte no GitHub.\"), mdx(\"p\", null, \"Depois de t\\xEA-lo instalado, antes de us\\xE1-lo voc\\xEA deve instanciar um objeto a\\npartir da classe  \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"NoSleep\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"var noSleep = new NoSleep();\\n\")), mdx(\"p\", null, \"Ap\\xF3s isso, a vari\\xE1vel \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"noSleep\"), \" armazenar\\xE1 um objeto com dois m\\xE9todos:\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"enable\"), \" (para ativar) e \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"disable\"), \" (para desativar). Algo curioso e que\\ncertamente \\xE9 um ponto negativo dessa biblioteca \\xE9 a obrigatoriedade do m\\xE9todo\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"enable\"), \" ser chamado dentro de um\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.w3schools.com/jsref/dom_obj_event.asp\"\n  }), \"evento\"), \" de entrada do\\nusu\\xE1rio, como um \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"click\"), \". Por exemplo, supondo que \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"button\"), \" \\xE9 o elemento de um\\nbot\\xE3o qualquer da sua p\\xE1gina ent\\xE3o voc\\xEA deve fazer isso para ativar o\\nNoSleep.js:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"button.addEventListener('click', () =\u003e {\\n  noSleep.enable();\\n});\\n\")), mdx(\"p\", null, \"J\\xE1 para desativ\\xE1-lo, basta usar \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"noSleep.disable()\"), \" em qualquer lugar do\\nc\\xF3digo, n\\xE3o havendo a necessidade de estar encapsulado em um evento do usu\\xE1rio.\"), mdx(\"h2\", null, \"Conclus\\xE3o\"), mdx(\"p\", null, \"Voc\\xEA pode experimentar um\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://theuves-demos.github.io/no-sleep-demo/\"\n  }), \"exemplo aqui\"), \", observando que\\n\\xE9 extremamente aconselh\\xE1vel que seu dispositivo esteja com um tempo limite de\\ntela baixo, caso contr\\xE1rio voc\\xEA poder\\xE1 perder muito tempo esperando at\\xE9 cair a\\nfixa de que a demonstra\\xE7\\xE3o est\\xE1 funcionando.\"), mdx(\"p\", null, \"Esse \\xE9 um utilit\\xE1rio simples e que em alguns casos para determinados usu\\xE1rios\\npode n\\xE3o fazer absolutamente nenhuma diferen\\xE7a, mas que para outros, como foi\\no meu, pode fazer uma falta gigantesca, n\\xE3o somente para leitura dum texto (que\\ntalvez seja um caso mais incomum), mas tamb\\xE9m para jogos, p\\xE1ginas com anima\\xE7\\xF5es\\nou simples aplicativos como o de um cron\\xF4metro.\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eRecentemente o \u003cem\u003epower button\u003c/em\u003e do meu \u003cem\u003esmartphone\u003c/em\u003e estragou e eu tive que\ncomeçar a me virar sem ele. A princípio, naturalmente, eu não conseguia\ndesligar a tela e o tempo de inatividade antes do seu desligamento era de 5\nminutos - o que é muito tempo para se esperar antes de colocá-lo no bolso.\nDesse modo, antes de eu querer concertar o dispositivo, procurar um aplicativo\nou qualquer coisa que seja para resolver o meu problema, decidi configurar o\ntempo máximo de inatividade para somente 15 segundos.\u003c/p\u003e\u003cp\u003eOu seja: se eu não tocar a tela em 15 segundos, ela desliga. Bem simples!\u003c/p\u003e\u003ch2\u003eProblemas\u003c/h2\u003e\u003cp\u003eNo entanto, notei alguns problemas ao fazer isso logo após tentar ler alguns\nartigos longos na \u003cem\u003einternet\u003c/em\u003e pelo \u003cem\u003ebrowser\u003c/em\u003e, pois a tela sempre desligava\ndurante a leitura, porque nesses casos o tempo sem tocar a tela do dispositivo\naumenta - principalmente se você está lendo algum artigo onde há muitas\nilustrações, fórmulas ou códigos que devem ser analisados por um tempinho um\npouco maior. Até que eu notei algo bem interessante que ocorria no aplicativo\ndo \u003ca href=\"https://www.instapaper.com/\"\u003eInstapaper\u003c/a\u003e, que além de lhe oferecer um vasto\nnúmero de utilitários e personalização durante a leitura de um texto, também\nimpede que a tela desligue enquanto você está a lê-lo, assim como quando você\nassiste um video.\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003eObs.: O Instapaper é um aplicativo que lhe permite salvar o texto principal\nde um site, aplicativo ou qualquer coisa do gênero para ler mais tarde, quando\nestiver desconectado da internet por exemplo.\u003c/p\u003e\u003c/blockquote\u003e\u003ch2\u003eSoluções\u003c/h2\u003e\u003cp\u003eDepois de ver essa funcionalidade, fiquei me questionando se haveria alguma\nforma de impedir que a tela desligue utilizando JavaScript dentro de um\n\u003cem\u003ebrowser\u003c/em\u003e. Fiz algumas pesquisas no Google e as duas primeiras coisas\nrelevantes que encontrei foram: \u003cem\u003eWake Lock API\u003c/em\u003e e \u003cem\u003eNoSleep.js\u003c/em\u003e.\u003c/p\u003e\u003cp\u003eA primeira, \u003cem\u003eWake Lock API\u003c/em\u003e, eu encontrei no artigo\n\u003ca href=\"https://developers.google.com/web/updates/2018/12/wakelock\"\u003e\u003cem\u003eI’m Awake! Stay Awake with the WakeLock API\u003c/em\u003e\u003c/a\u003e,\ndo Pete LePage no Google Developers, que é uma API para os navegadores que\nbasicamente permite manter o \u0026quot;dispositivo acordado\u0026quot;, só que ela ainda está em\nprogresso e aparentemente funciona apenas no Google Chrome e com a \u003cem\u003eflag\u003c/em\u003e\n\u003ccode\u003e#enable-experimental-web-platform-features\u003c/code\u003e habilitada nele, portanto, isso\nainda não é ainda nem um pouco útil para os dias de hoje.\u003c/p\u003e\u003cp\u003eA segunda, \u003ca href=\"https://github.com/richtr/NoSleep.js\"\u003e\u003cem\u003eNoSleep.js\u003c/em\u003e\u003c/a\u003e, é uma\nbiblioteca criada pelo Rich Tibbett que eu encontrei no GitHub e que lhe\npermite fazer algo bem semelhante ao \u003cem\u003eWake Lock API\u003c/em\u003e, no entanto, com algo que\nalguns podem chamar de gambiarra. O fato é que uma tela não descansa se o\nusuário estiver assistindo um vídeo, certo?! Desse modo, o \u003cem\u003eNoSleep.js\u003c/em\u003e,\nenquanto estiver ativado, apenas dá \u003cem\u003eplay\u003c/em\u003e num video em segundo plano fazendo\no navegador entender que o usuário está assistindo algo e evitando assim o\ndesligamento dela. O video em questão não apresenta nenhum vestígio de seu\ncomportamento para o usuário, pois além de ser mudo nem chega a ser inserido na\n\u003ccode\u003e\u0026lt;body\u0026gt;\u003c/code\u003e do HTML, além de ser muitíssimo leve.\u003c/p\u003e\u003ch2\u003eUso do NoSleep.js\u003c/h2\u003e\u003cp\u003eUsar essa biblioteca é extremamente simples, onde você possui apenas dois\nmodos: ativado e desativado. O primeiro faz com que a tela não descanse e o\nsegundo, obviamente, deixa a tela no modo normal.\u003c/p\u003e\u003cp\u003eÉ possível obter o NoSleep.js pelo \u003ca href=\"https://www.npmjs.com/\"\u003eNPM\u003c/a\u003e,\n\u003ca href=\"https://bower.io/\"\u003eBower\u003c/a\u003e\n(que já \u003ca href=\"https://snyk.io/blog/bower-is-dead/\"\u003efoi descontinuado\u003c/a\u003e) ou\ndiretamente pelo \u003cem\u003edownload\u003c/em\u003e do código-fonte no GitHub.\u003c/p\u003e\u003cp\u003eDepois de tê-lo instalado, antes de usá-lo você deve instanciar um objeto a\npartir da classe  \u003ccode\u003eNoSleep\u003c/code\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003evar noSleep = new NoSleep();\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eApós isso, a variável \u003ccode\u003enoSleep\u003c/code\u003e armazenará um objeto com dois métodos:\n\u003ccode\u003eenable\u003c/code\u003e (para ativar) e \u003ccode\u003edisable\u003c/code\u003e (para desativar). Algo curioso e que\ncertamente é um ponto negativo dessa biblioteca é a obrigatoriedade do método\n\u003ccode\u003eenable\u003c/code\u003e ser chamado dentro de um\n\u003ca href=\"https://www.w3schools.com/jsref/dom_obj_event.asp\"\u003eevento\u003c/a\u003e de entrada do\nusuário, como um \u003ccode\u003eclick\u003c/code\u003e. Por exemplo, supondo que \u003ccode\u003ebutton\u003c/code\u003e é o elemento de um\nbotão qualquer da sua página então você deve fazer isso para ativar o\nNoSleep.js:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003ebutton.addEventListener(\u0026#x27;click\u0026#x27;, () =\u0026gt; {\n  noSleep.enable();\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eJá para desativá-lo, basta usar \u003ccode\u003enoSleep.disable()\u003c/code\u003e em qualquer lugar do\ncódigo, não havendo a necessidade de estar encapsulado em um evento do usuário.\u003c/p\u003e\u003ch2\u003eConclusão\u003c/h2\u003e\u003cp\u003eVocê pode experimentar um\n\u003ca href=\"https://theuves-demos.github.io/no-sleep-demo/\"\u003eexemplo aqui\u003c/a\u003e, observando que\né extremamente aconselhável que seu dispositivo esteja com um tempo limite de\ntela baixo, caso contrário você poderá perder muito tempo esperando até cair a\nfixa de que a demonstração está funcionando.\u003c/p\u003e\u003cp\u003eEsse é um utilitário simples e que em alguns casos para determinados usuários\npode não fazer absolutamente nenhuma diferença, mas que para outros, como foi\no meu, pode fazer uma falta gigantesca, não somente para leitura dum texto (que\ntalvez seja um caso mais incomum), mas também para jogos, páginas com animações\nou simples aplicativos como o de um cronômetro.\u003c/p\u003e","scope":{"title":"Impedindo que a tela desligue com JavaScript","date":"2019-05-07"}},"frontMatter":{"title":"Impedindo que a tela desligue com JavaScript","date":"2019-05-07"}},"__N_SSG":true},"page":"/blog/[post]","query":{"post":"impedindo-que-a-tela-desligue-com-javascript"},"buildId":"NIKYl7AmDWv9eLps7O_lE","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-81bd132d8cf44e5a14d7.js"></script><script src="/_next/static/chunks/main-12c069fcb26ee750200e.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js" async=""></script><script src="/_next/static/chunks/1b1d2efccfda2790dd424b9455d4bf69d97f9eaa.10b20fed2722a467a0a9.js" async=""></script><script src="/_next/static/chunks/f6078781a05fe1bcb0902d23dbbb2662c8d200b3.22385a4a605b66265c77.js" async=""></script><script src="/_next/static/chunks/pages/_app-03211d1b50de1d1700ce.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bpost%5D-27b6e4167a38e98f672f.js" async=""></script><script src="/_next/static/NIKYl7AmDWv9eLps7O_lE/_buildManifest.js" async=""></script><script src="/_next/static/NIKYl7AmDWv9eLps7O_lE/_ssgManifest.js" async=""></script></body></html>